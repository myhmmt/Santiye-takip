<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vista Premium – Şantiye Takip v1.1</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0d47a1" />
  <!-- iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icon/apple-icon-180.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="assets/icon/apple-icon-152.png" />

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet"/>

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app-container">
    <!-- HEADER -->
    <header class="app-header">
      <h1>[ Vista Premium – Şantiye Takip v1.1 ]</h1>
      <p class="sub-info">Muhammet Genç tarafından geliştirilmiştir.</p>
    </header>

    <main class="app-main">
      <!-- Bölüm 1: Günlük Yoklama -->
      <section id="bolum1" class="page">
        <h2>Bölüm 1: Günlük Yoklama</h2>
        <form id="formYoklama" class="card">
          <div class="form-group">
            <label for="yoklamaEkip">Ekip Seçimi</label>
            <select id="yoklamaEkip"></select>
          </div>
          <div class="form-group">
            <label for="yoklamaKisi">Kişi Sayısı</label>
            <input type="number" id="yoklamaKisi" placeholder="Örn: 5" min="1" />
          </div>
          <div class="form-group">
            <label for="yoklamaBlok">Blok Seçimi</label>
            <div class="inline">
              <select id="yoklamaBlok" class="grow"></select>
              <button type="button" id="btnPaftaYoklama" class="btn btn-secondary">
                <i class="fa-solid fa-map"></i> Paftadan Seç
              </button>
            </div>
          </div>
          <div class="form-group">
            <label for="yoklamaNot">Not (Opsiyonel)</label>
            <textarea id="yoklamaNot" rows="3"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">
            <i class="fa-solid fa-user-check"></i> Giriş Yap
          </button>
        </form>

        <div class="ozet-panel card">
          <h3>Bugünkü Yoklama Özeti</h3>
          <ul id="yoklamaListesi" class="list"></ul>
        </div>
      </section>

      <!-- Bölüm 2: Hızlı Kayıt -->
      <section id="bolum2" class="page">
        <h2>Bölüm 2: Hızlı Kayıt (İmalat Girişi)</h2>
        <form id="formHizliKayit" class="card">
          <div class="form-group">
            <label for="kayitKullanici">Kullanıcı</label>
            <select id="kayitKullanici"></select>
          </div>
          <div class="form-group">
            <label for="kayitEkip">Ekip / İmalat Kalemi</label>
            <select id="kayitEkip"></select>
          </div>
          <div class="form-group">
            <label for="kayitBlok">Blok Seçimi</label>
            <div class="inline">
              <select id="kayitBlok" class="grow"></select>
              <button type="button" id="btnPaftaKayit" class="btn btn-secondary">
                <i class="fa-solid fa-map"></i> Paftadan Seç
              </button>
            </div>
          </div>
          <div class="form-group">
            <label for="kayitDurum">Durum</label>
            <select id="kayitDurum">
              <option value="Basladi">Başladı</option>
              <option value="Devam">Devam Ediyor</option>
              <option value="Bitti">Bitti</option>
              <option value="Teslim">Teslim Alındı</option>
            </select>
          </div>
          <div class="form-group">
            <label for="kayitNot">Not (Opsiyonel)</label>
            <textarea id="kayitNot" rows="3"></textarea>
          </div>
          <button type="submit" class="btn btn-primary">
            <i class="fa-solid fa-floppy-disk"></i> Kaydet
          </button>
        </form>

        <div class="card">
          <h3>Hızlı Kayıt Arşivi – Filtre</h3>
          <div class="inline">
            <select id="filtreEkip" class="grow"></select>
            <select id="filtreBlok" class="grow"></select>
            <button id="btnFiltreTemizle" class="btn btn-secondary">
              <i class="fa-solid fa-broom"></i> Temizle
            </button>
          </div>
        </div>
      </section>

      <!-- Bölüm 3: Pano -->
      <section id="bolum3" class="page active">
        <h2>Bölüm 3: Proje Durum Panosu</h2>
        <div class="inline" style="margin-bottom:12px">
          <button id="btnPdfIcmal" class="btn btn-primary">
            <i class="fa-solid fa-file-pdf"></i> İcmal PDF Al
          </button>
          <div style="min-width:240px" class="card">
            <label for="panoEkipFiltre">İmalat Durumunu Göster:</label>
            <select id="panoEkipFiltre"></select>
          </div>
        </div>

        <!-- Pafta -->
        <div id="projePaftasi" class="card">
          <h3>Görsel Proje Paftası</h3>
          <div class="pafta">
            <div class="pafta-row" id="row-top"></div>
            <div class="pafta-row" id="row-mid"></div>
            <div class="pafta-row" id="row-bot"></div>
          </div>
        </div>

        <!-- Hızlı Kayıt Arşivi -->
        <div id="hizliKayitArsivi" class="card">
          <h3>Hızlı Kayıt Arşivi (Tüm İmalatlar)</h3>
          <div class="table-responsive">
            <table id="arsivTablosu">
              <thead>
              <tr>
                <th>Tarih</th><th>Kullanıcı</th><th>Ekip</th><th>Blok</th>
                <th>Durum</th><th>Not</th><th>İşlem</th>
              </tr>
              </thead>
              <tbody id="arsivBody"></tbody>
            </table>
          </div>
        </div>
      </section>
    </main>

    <!-- Alt Menü -->
    <nav class="app-nav">
      <button class="nav-btn" data-page="bolum1">
        <i class="fas fa-user-check"></i><span>Yoklama</span>
      </button>
      <button class="nav-btn" data-page="bolum2">
        <i class="fas fa-plus-circle"></i><span>Hızlı Kayıt</span>
      </button>
      <button class="nav-btn active" data-page="bolum3">
        <i class="fas fa-th-large"></i><span>Ana Pano</span>
      </button>
    </nav>
  </div>

  <!-- Modal: Paftadan Seç -->
  <div class="modal" id="modal">
    <div class="sheet">
      <div class="top">
        <h3>Paftadan Blok Seç</h3>
        <button class="btn close" id="btnClose"><i class="fa-solid fa-xmark"></i> Kapat</button>
      </div>
      <p class="help">Bir bloğa dokunduğunda seçili form alanına aktarılır.</p>
      <div class="pafta" id="modalPafta" style="margin-top:8px">
        <div class="row" id="m-top"></div>
        <div class="row" id="m-mid"></div>
        <div class="row" id="m-bot"></div>
      </div>
    </div>
  </div>

  <!-- Print Alanı -->
  <section id="printArea">
    <h2 style="text-align:center;margin:8px 0 14px">Şantiye İlerleme İcmali — Vista Premium</h2>
    <div id="printTable" class="card"></div>
  </section>

  <!-- Firebase + App -->
  <script type="module" src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }
  </script>
</body>
</html>
